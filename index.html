<!DOCTYPE html>
<html lang="es">
    <meta charset="UTF-8">
    <head>
        <title>Juego de atrapar</title>
        <style>
            body {
                text-align: center;
                background-color: #222;
                color: white;
                font-family: sans-serif;
            }

            #gameArea {
                position: relative;
                width: 500px;
                height: 400px;
                background-color: #333;
                margin: 20px auto;
                border: 2px solid white;
            }

            #square {
                position: absolute;
                width: 50px;
                height: 50px;
                background-color: red;
                display: none;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <h1>Atrapa el cuadrado</h1>
        <p>Haz click en el cuadrado rojo para ganar puntos</p>
        <div id="gameArea">
            <div id="square"></div>
        </div>
       <script>
            const square = document.getElementById("square");
            const gameArea = document.getElementById("gameArea");
            const scoreDisplay = document.createElement("div");
            document.body.appendChild(scoreDisplay);
            scoreDisplay.style.fontSize = "24px";
            scoreDisplay.style.marginTop = "10px";

            let score = 0;
            let startTime;
            let timer;

            function showSquare() {
                const x = Math.random() * (gameArea.clientWidth - 50);
                const y = Math.random() * (gameArea.clientHeight - 50);
                square.style.left = `${x}px`;
                square.style.top = `${y}px`;
                square.style.display = "block";
                startTime = Date.now();

                // El cuadrado desaparece si no lo tocas en 1,5 segundos
                timer = setTimeout(() => {
                square.style.display = "none";
                showSquare(); // Aparece uno nuevo
                updateScore(0); // No se toc√≥ a tiempo
                }, 1500);
            }

            // =========================
            // SISTEMA DE MONEDAS
            // =========================
            function updateScore(points) {
                score += points;
                scoreDisplay.textContent = `Monedas: ${score}`;
                updateShop(); // <- Comprobamos la tienda cada vez que cambian las monedas
            }

            // =========================
            // TIENDA
            // =========================
            const shop = document.createElement("div");
            document.body.appendChild(shop);
            shop.style.marginTop = "15px";
            shop.style.fontSize = "20px";
            shop.innerHTML = `
                <p><strong>Tienda:</strong></p>
                <button id="buySword">Comprar espada de madera (20 monedas)</button>
                <p id="ownedItems"></p>
            `;

            const buySwordBtn = document.getElementById("buySword");
            const ownedItems = document.getElementById("ownedItems");
            let hasSword = false;

            // Actualiza si se puede comprar
            function updateShop() {
                if (score >= 20 && !hasSword) {
                buySwordBtn.disabled = false;
                } else {
                buySwordBtn.disabled = true;
                }
            }

            // L√≥gica de compra
            buySwordBtn.addEventListener("click", () => {
                if (score >= 20 && !hasSword) {
                score -= 20;
                hasSword = true;
                ownedItems.textContent = "Has comprado: ü™µ Espada de madera";
                buySwordBtn.textContent = "Espada de madera ‚Äî Comprada ‚úÖ";
                buySwordBtn.disabled = true;
                scoreDisplay.textContent = `Monedas: ${score}`;
                }
            });

            // =========================
            // INTERACCI√ìN CON EL CUADRADO
            // =========================
            square.addEventListener("pointerdown", () => {
                const reaction = Date.now() - startTime;
                clearTimeout(timer);
                square.style.display = "none";

                let points = 0;
                if (reaction <= 600) points = 3;
                else if (reaction <= 1000) points = 2;
                else if (reaction <= 1500) points = 1;

                updateScore(points);
                showSquare();
            });

            showSquare();
        </script>
    </body>
</html>
        


